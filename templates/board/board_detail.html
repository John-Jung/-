{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
<<<<<<< HEAD
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<title>{{ board_detail.title }}</title>

<style>

.container {
  max-width: 1000px;
  margin: 0 auto; /* 양쪽 마진을 자동으로 설정하여 가운데 정렬 */
  padding: 50px;
  border-radius: 10px;
  background-color: white;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}
img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
}

textarea {
    width: 100%;
    height: 100px;
    border: 1px solid gray;
    border-radius: 4px;
    padding: 10px;
}

.title-divider, .content-divider {
    border-bottom: 2px solid grey;
    margin-bottom: 20px;
}
label[for="id_text"] {
display: none;
}

h1.display-4 {
    font-weight: bold;
    font-size: 2em;
    margin-bottom: 0.5rem;
}
.btn-custom {
    position: fixed;
    right: 42px; /* 사이드 바 버튼과의 거리 조절 */
    /* left: 1294px; */
    top: 400px;   /* 사이드 바 버튼과의 거리 조절 */
    width: 150px; /* 버튼의 너비 설정 */
    height: 40px; /* 버튼의 높이 설정 */
    background-color: #111;
    color: white;
    display: flex;
    justify-content: center; 
    align-items: center;
    padding: 10px 20px;
    border: none;

    cursor: pointer;
    z-index: 1002; /* 새 글 작성 버튼 위에 위치하도록 z-index 값을 높임 */
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
}
.btn-custom:hover {
background-color: mediumaquamarine; /* 마우스 호버 시 배경색을 검정색으로 변경 */
color: white; /* 마우스 호버 시 텍스트를 흰색으로 변경 */
}
.btn-custom1 {
    position: fixed;
    right: 44px; /* 사이드 바 버튼과의 거리 조절 */
    top: 330px;   /* 사이드 바 버튼과의 거리 조절 */
    width:150px; /* 버튼의 너비 설정 */
    height: 40px; /* 버튼의 높이 설정 */
    background-color: #111;
    color: white;
    display: flex;
    justify-content: center; 
    align-items: center;
    padding: 10px 20px;
    border: none;
    
    cursor: pointer;
    z-index: 1002; /* 새 글 작성 버튼 위에 위치하도록 z-index 값을 높임 */
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
}
.btn-custom1:hover {
background-color: mediumaquamarine; /* 마우스 호버 시 배경색을 검정색으로 변경 */
color: white; /* 마우스 호버 시 텍스트를 흰색으로 변경 */
}
.btn-custom2 {
    position: fixed;
    right: 36px; /* 사이드 바 버튼과의 거리 조절 */
    top: 260px;   /* 사이드 바 버튼과의 거리 조절*/
    width: 150px; /* 버튼의 너비 설정 */
    height: 40px; /* 버튼의 높이 설정 */
    background-color: #111;
    color: white;
    display: flex;
    justify-content: center; 
    align-items: center;
    padding: 10px 20px;
    border: none;
   
    cursor: pointer;
    z-index: 1002; /* 새 글 작성 버튼 위에 위치하도록 z-index 값을 높임 */
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
}
.btn-custom2:hover {
background-color: mediumaquamarine; /* 마우스 호버 시 배경색을 검정색으로 변경 */
color: white; /* 마우스 호버 시 텍스트를 흰색으로 변경 */
}
.btn-custom3 {
    position: fixed;
    right: 36px; /* 사이드 바 버튼과의 거리 조절 */
    top: 120px;   /* 사이드 바 버튼과의 거리 조절 */
    width: 150px; /* 버튼의 너비 설정 */
    height: 40px; /* 버튼의 높이 설정 */
    background-color: #111;
    color: white;
    display: flex;
    justify-content: center; 
    align-items: center;
    padding: 10px 20px;
    border: none;

    cursor: pointer;
    z-index: 1002; /* 새 글 작성 버튼 위에 위치하도록 z-index 값을 높임 */
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
}
.btn-custom3:hover {
background-color: mediumaquamarine; /* 마우스 호버 시 배경색을 검정색으로 변경 */
color: white; /* 마우스 호버 시 텍스트를 흰색으로 변경 */
}
.btn-custom4 {
    position: fixed;
    right: 42px;
    /*left: 1294px;  사이드 바 버튼과의 거리 조절 */
    top: 190px;   /* 사이드 바 버튼과의 거리 조절 */
    width: 150px; /* 버튼의 너비 설정 */
    height: 40px; /* 버튼의 높이 설정 */
    background-color: #111;
    color: white;
    display: flex;
    justify-content: center; 
    align-items: center;
    padding: 10px 20px;
    border: none;

    cursor: pointer;
    z-index: 1002; /* 새 글 작성 버튼 위에 위치하도록 z-index 값을 높임 */
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
}
.btn-custom4:hover {
background-color: mediumaquamarine; /* 마우스 호버 시 배경색을 검정색으로 변경 */
color: white; /* 마우스 호버 시 텍스트를 흰색으로 변경 */
}
.created-at {
font-size: 12px; /* 작성일 폰트 크기를 13px로 설정 */
}

</style>
</head>
<body>
    
    <div class="container" style="margin-top: 100px">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h1 class="display-4 mb-0">{{ board_detail.title }}</h1>
            <span class="created-at"> {{ board_detail.created_at|date:"Y.m.d" }}</span>
        </div>
        <div class="title-divider"></div> <!-- 검정색 라인 추가 -->
        <div class="mb-3">
            <span>작성자: {{ writer_nickname }}</span>
        </div>
{% if board_detail.imgfile %}
<img src="{{ board_detail.imgfile.url }}" alt="이미지" class="img-fluid mb-3">
{% endif %}

<p class="mb-3">{{ board_detail.content|linebreaksbr }}</p>

<div class="content-divider"></div> <!-- 검정색 라인 추가 -->

<div class="mb-3">댓글</div>
<ul class="list-unstyled">
<!--댓글 삭제 html-->
{% for comment in comments %}
    <li class="mb-3 d-flex justify-content-between align-items-start">
        <div>
            <div><span class="fw-bold">{{ comment.writer_nickname }}</span></div>
            <div>{{ comment.text }}</div>
        </div>
        {% if user.id == comment.writer_id or user.id == board_detail.writer_id %}
        <form action="/board/comments/{{ board_detail.id }}/delete/{{ comment.pk }}/" method="POST" class="mt-3">
            {% csrf_token %}
            <button type="submit" class="btn btn-custom delete-comment-btn">
                <i class="fas fa-times"></i> 댓글 삭제
            </button>
        </form>
        {% endif %}
    </li>
{% endfor %}
</ul>


<form action="/board/comment_create/{{ board_detail.id }}/" method="post" class="mb-3">
{% csrf_token %}
{{ comment_form.as_p }}
<button type="submit" class="btn btn-custom1">
    <i class="fas fa-comment"> 댓글 작성</i>
</button>
</form>

<div class="d-flex justify-content-end">
<a href="/board/board_list/" class="btn btn-custom2 mb-3 me-2">
    <i class="fas fa-list"> 목록으로</i>
</a>
{% if user.id == board_detail.writer_id %}
<a href="/board/board_edit/{{ board_detail.id }}" class="btn btn-custom3 mb-3 me-2">
    <i class="fas fa-edit"> 글 수정</i>
</a>
<form action="/board/delete/{{ board_detail.id }}" method="POST">
{% csrf_token %}
<button type="submit" class="btn btn-custom4 mb-3">
    <i class="fas fa-trash-alt"> 글 삭제</i>
</button>
</form>
{% endif %}
</div>
</div>
<!-- Bootstrap Bundle with Popper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<!--글 삭제 시 글 삭제하냐고 물어보는 기능-->
    <script>
        // 글 삭제 버튼 클릭 시 확인 메시지 표시
        document.querySelector('.btn-custom4').addEventListener('click', function(event) {
            var result = confirm("글을 삭제하시겠습니까?");
        
            if (!result) {
                event.preventDefault(); // 확인을 클릭하지 않으면 폼 제출을 중단
            }
        });
    </script>
    <!--댓글 삭제-->

    <script>
        // 댓글 삭제 버튼 클릭 시 확인 메시지 표시
        document.querySelectorAll('.delete-comment-btn').forEach(function(btn) {
            btn.addEventListener('click', function(event) {
                var result = confirm("댓글을 삭제하시겠습니까?");
                
                if (!result) {
                    event.preventDefault(); // 확인을 클릭하지 않으면 폼 제출을 중단
                }
            });
        });
    </script>
=======
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>게시글 상세보기</title>
  <style>
   @import url('https://fonts.googleapis.com/css2?family=Bagel+Fat+One&family=Black+And+White+Picture&family=Cute+Font&family=Single+Day&display=swap');
    body {
      font-size: 30px;
      
      text-align: center;
      background-color: #fff;
      background-image: url("");
      background-repeat: no-repeat;
      background-size: cover;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 800px;
      margin: 0px auto;
      padding: 20px;
      border: 1px solid #fff;
      border-radius: 100px;
      background-color: #fff;
      
      overflow: hidden;
    }
    h1, h2, h3 {
      color: #007bff;
    }
    h3{
       font-size: 20px !important;
    }
    h1 {
      margin-bottom: 20px;
    }
    h2, h3 {
      margin-bottom: 10px;
      
    }
    ul {
      list-style: none;
      padding: 0;
      margin-bottom: 20px;
    }
    li {
      margin-bottom: 10px;
    }
    form {
      margin-top: 10px;
    }
    button {
      padding: 8px 16px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    h2{
       font-size: 30px !important;
    }
    a {
      color: #007bff;
      text-decoration: none;
    }
    .container img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
    }
    .comment {
      background-color: #fff;
      border: 1px solid #fff;
      border-radius: 10px;
      padding: 1px;
      margin-bottom: 10px;
    }
    q{
      text-align: left;
    }
    input[type="text"], textarea {
            border: 4px solid #007bff;
            border-radius: 50px;
            padding: 8px;
        }
  </style>
</head>
<body>
  <div class="container">
    <h1>게시글 상세보기</h1>
    <h2>[ 제목: {{ board_detail.title }} ]</h2>
    <div>[ 작성자: {{ user.name }} ]</div>
    <div>[ 작성일: {{ board_detail.created_at }} ]</div>
  <q> <h3>내용 :</h3>
    
    <div class="content">
      {{ board_detail.content | safe }}
    </div>
    {% if board_detail.imgfile %}
    <div class="image-container">
      <img src="{{ board_detail.imgfile.url }}" alt="게시글 이미지">
    </div>
    {% endif %}

    <br>
    <br>
    
    <h3>댓글:</h3>
    <ul class="comments">
      {% for comment in comments %}
      <li class="comment">
        {{ comment.text }}
        {% if user.id == comment.writer_id or user.id == board_detail.writer_id %}
        <form action="/board/comments/{{ board_detail.id }}/delete/{{ comment.pk }}/" method="POST">
          {% csrf_token %}
          <button type="submit">댓글 삭제</button>
        </form>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </q>
    <h3>댓글 남기기:</h3>
    <form action="/board/comment_create/{{ board_detail.id }}/" method="post">
      {% csrf_token %}
      {{ comment_form.as_p }}
      <button type="submit">댓글 생성</button>
    </form>
    <a href="/board/board_list/">홈화면으로 돌아가기</a><br>
    {% if user.id == board_detail.writer_id %}
    <a href="/board/board_list/">목록으로 돌아가기</a><br>
    <a href="/board/board_edit/{{ board_detail.id }}">수정하기</a><br>
    <form action="/board/delete/{{ board_detail.id }}" method="POST">
      {% csrf_token %}
      <button type="submit">삭제</button>
    </form>
    {% endif %}
  </div>
>>>>>>> b9fde118869f984522fa7a3203fdb66bdfcead7a
</body>
</html>
{% endblock %}